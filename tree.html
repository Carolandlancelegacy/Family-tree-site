<!DOCTYPE html>
<html>
<head>
  <title>Family Tree</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
</head>
<body>
  <h1>Family Tree Viewer</h1>
  <p id="placeholder">This is where your visual tree will appear.</p>
  <!-- Replace your old <script> with this in <body> -->
<script>
fetch('tree.json')
  .then(response => response.json())
  .then(data => {
    const width = 1000;
    const dx = 60;
    const dy = 200;

   const tree = d3.tree().nodeSize([200, 120]); // spread wider and downward
const diagonal = d3.linkHorizontal()
  .x(d => d.y)  // flip x/y to make it top-to-bottom
  .y(d => d.x);


    const root = d3.hierarchy(data);
    root.x0 = dy / 2;
    root.y0 = 0;
    tree(root);

    const svg = d3.select("body").append("svg")
      .attr("width", 1200)
.attr("height", 1000)
.attr("viewBox", [-100, 0, 1200, 1000])
      .style("font", "14px sans-serif");

    const g = svg.append("g")
  .attr("transform", `translate(${dy / 3},${dx})`);


    const link = g.append("g")
      .attr("fill", "none")
      .attr("stroke", "#555")
      .attr("stroke-opacity", 0.6)
      .attr("stroke-width", 1.5)
      .selectAll("path")
      .data(root.links())
      .join("path")
      .attr("d", diagonal);

    const node = g.append("g")
  .attr("stroke-linejoin", "round")
  .attr("stroke-width", 3)
  .selectAll("g")
  .data(root.descendants())
  .join("g")
  .attr("transform", d => `translate(${d.y},${d.x})`); // flip x/y for vertical layout

// Add a circle for each node
node.append("circle")
  .attr("r", 40)
  .attr("fill", "#f0f0f0")
  .attr("stroke", "#555");

// Add text inside the circle
node.append("text")
  .attr("dy", "0.31em")
  .attr("text-anchor", "middle")
  .style("font", "12px sans-serif")
  .text(d => d.data.name);

    node.append("rect")
      .attr("fill", "#f8f8f8")
      .attr("stroke", "#333")
      .attr("rx", 10)
      .attr("ry", 10)
      .attr("x", -70)
      .attr("y", -20)
      .attr("width", 140)
      .attr("height", 40);

    node.append("text")
      .attr("dy", "0.32em")
      .attr("text-anchor", "middle")
      .text(d => d.data.name);
  });
</script>

</body>

</html>
