<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Family Tree Viewer</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <h1>Family Tree Viewer</h1>
  <p>This is where your visual tree will appear.</p>
  <svg id="tree-svg" viewBox="0 0 1200 3000" preserveAspectRatio="xMidYMin meet"></svg>

  <script>
    const svg = d3.select("svg"),
          width = 1200,
          height = 3000;

    const g = svg.append("g")
      .attr("transform", `translate(${width / 2}, 100)`);

    const tree = d3.tree().nodeSize([100, 200]);
    const stratify = d3.stratify().parentId(d => d.id.substring(0, d.id.lastIndexOf(".")));

    d3.json("tree.json").then(function(data) {
      const root = d3.hierarchy(data);
      tree(root);

      // Links
      g.selectAll(".link")
        .data(root.links())
        .join("path")
        .attr("class", "link")
        .attr("fill", "none")
        .attr("stroke", "#ccc")
        .attr("stroke-width", 2)
        .attr("d", d3.linkVertical()
          .x(d => d.x)
          .y(d => d.y));

      // Nodes
      const node = g.selectAll(".node")
        .data(root.descendants())
        .join("g")
        .attr("class", "node")
        .attr("transform", d => `translate(${d.x},${d.y})`);

      node.append("circle")
        .attr("r", 20)
        .attr("fill", "#fff")
        .attr("stroke", "black")
        .attr("stroke-width", 2);

      node.append("text")
        .attr("dy", 5)
        .attr("x", d => d.children ? -25 : 25)
        .style("text-anchor", d => d.children ? "end" : "start")
        .text(d => d.data.name);
    });
  </script>
</body>
</html>
